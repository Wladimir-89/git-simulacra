#!/bin/bash
set -e

# Шоттс: git commit — это акт фиксации, первый шаг в истории.
# Бодрийяр: История? Ты фиксируешь фантом. Коммит — это создание симулякра изменения.

echo "Фиксация"
echo "Команда git commit"

# Шоттс: Зафиксируем дату, пользователя и хост — чтобы подпись имела вес.
# Бодрийяр: Подпись? В эру симулякров всё подписано ничто.

DATE=$(date)
GIT_USER=$(whoami)
HOST=$(hostname -f)

# Шоттс: Проверим наличие git — инструмент фиксации изменений.
# Бодрийяр: Проверка — иллюзия контроля. Git сам наблюдает за тобой.

if command -v git >/dev/null 2>&1;
then
  # Шоттс: создаем директорию для эксперимента.
  # Бодрийяр: Папка внутри папки внутри структуры — бесконечное зеркало.
  mkdir -p git-commit-example
  cd git-commit-example || { echo "Невозможно перейти в каталог"; exit 1; }

  # Шоттс: инициализируем репозиторий — создаём историю.
  # Бодрийяр: Пустая история — но ты веришь в её подлинность.
  git init --quiet

  # Шоттс: создаём файл — первый смысл.
  # Бодрийяр: "Привет, мир!" — ты передаёшь послание никому.
  echo "Привет, мир!" > example.txt

  # Шоттс: добавим файл в индекс.
  # Бодрийяр: Ты отправляешь знак в буфер ожидания — как письмо в бутылке.
  git add example.txt

  # Шоттс: фиксируем изменение с меткой времени, автора и места.
  # Бодрийяр: Твоя фиксация — след, который сам себя стирает.
  git commit -m "example.txt added on $DATE by $GIT_USER on $HOST"

  # Шоттс: посмотрим на результат — кратко и ясно.
  # Бодрийяр: Ты читаешь строку и называешь её истиной.
  git log --oneline

  cd ..
else
  # Шоттс: Git не найден. Установите инструмент, чтобы начать путь.
  # Бодрийяр: Или, быть может, в этом отказе — подлинная свобода.
  echo "Установите гит."
fi

