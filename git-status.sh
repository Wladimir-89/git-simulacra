#!/bin/bash
set -e  # Шоттс: "Если что-то идёт не так — скрипт должен прекратиться."
        # Бодрийяр: "Ошибка — это не сбой, это знак. Знак отказа исполнять симулякр."

echo "Проверка состояния"
echo "Команда git status"

if command -v git > /dev/null 2>&1;  then
  # Шоттс: "Проверяем, установлен ли git. Утилитарно."
  # Бодрийяр: "Иначе говоря — проверяем, способен ли субъект войти в поле симуляции."

  echo "Git версии $(git --version) установлен на $(hostname -f) для $(whoami)."
  # Бодрийяр: "Субъект идентифицирован. Машина — готова. Логин — персонализирован."
  # Шоттс: "Отлично, всё работает. Переходим к созданию каталога."

  mkdir -p git-status-example || { echo "Невозможно перейти в каталог"; exit 1;}
  # Шоттс: "Создаём директорию под наш эксперимент."
  # Бодрийяр: "Создание пространства — это акт. Имитация независимости."

  cd git-status-example || { echo "Невозможно перейти в каталог"; exit 1;}
  # Шоттс: "Входим в лабораторию."
  # Бодрийяр: "Мы пересекли порог. Теперь всё здесь — часть модели."

  git init --quiet --initial-branch=main
  # Шоттс: "Инициализируем git, явно указывая ветку main."
  # Бодрийяр: "Создание репозитория — это симуляция начала. Иллюзия происхождения."

  echo "Hello, World!" > example.txt
  # Шоттс: "Создаём тестовый файл."
  # Бодрийяр: "Первый знак. Обозначение без обозначаемого."

  git add example.txt
  # Шоттс: "Добавляем файл в индекс."
  # Бодрийяр: "Файл ещё не зафиксирован. Он существует в состоянии потенциальности."

  ls -lh
  # Шоттс: "Проверка содержимого."
  # Бодрийяр: "Мы смотрим на материю симуляции. Иллюзия контроля."

  git status
  # Шоттс: "Показываем состояние репозитория."
  # Бодрийяр: "Git сообщает нам состояние, как бы говоря: 'ты видишь, значит ты управляешь'."

  git commit -m "added example.txt"
  # Шоттс: "Первый коммит. Осмысленное сохранение."
  # Бодрийяр: "Это ритуал. Как подпись под актом рождения."

  git status
  # Шоттс: "Состояние после коммита: чисто."
  # Бодрийяр: "Чистота — это не отсутствие изменений, это их временная маскировка."

  echo "$(date)" >> example.txt
  # Шоттс: "Редактируем файл — добавляем дату."
  # Бодрийяр: "Добавляем след времени. Но это не время, а его отпечаток."

  git status
  # Шоттс: "Смотрим, что изменилось."
  # Бодрийяр: "Git снова вскрывает симуляцию. Показывает: знак изменён."

  git add example.txt
  # Шоттс: "Фиксируем изменения."
  # Бодрийяр: "Ты снова веришь, что управляешь. Но ты лишь добавляешь слой."

  git status
  # Шоттс: "Проверка индекса."
  # Бодрийяр: "Git как жрец говорит: 'жертва принята, скоро будет ритуал'."

  git log --oneline
  # Шоттс: "Смотрим историю изменений в краткой форме."
  # Бодрийяр: "История — это крошечный миф. Каждое изменение — как глава из симуляции."

else
  echo "Установите git"
  # Шоттс: "Если git не установлен — нужно установить."
  # Бодрийяр: "Иначе субъект не может вступить в систему. Он останется за гранью знаков."
fi

